(this.webpackJsonpSubscrypt=this.webpackJsonpSubscrypt||[]).push([[0],{157:function(e,t,n){"use strict";t.a={approval:"BSADAQAEJgMScGxhbl9tb250aGx5X3ByaWNlB2NyZWF0b3IPbnVtX3N1YnNjcmliZXJzMRgjEkAA7zEZIxJAADYxGSISQAAtMRmBBRJAABAxGYECEjEZJBIRQAABACNDMQApZBIxADIJEhFEKWSIARIiQyNDIkM2GgCABXNldHVwEkAAmTYaAIAJc3Vic2NyaWJlEkAAAQAxFiIJOBAiEjEWIgk4ADEAEhAxFiIJOAcyChIQMRYiCTgIMgAPEDEWIgk4CChkCiIPEEQqKmQiCGcjgARwYWlkMRYiCTgIZiOAEW1vbnRoc19zdWJzY3JpYmVkMRYiCTgIKGQKZiOAF3N1YnNjcmlwdGlvbl9zdGFydF9kYXRlMgdmIkMjQ7EkshAyCrIUsyJDKTYaAGeADGNyZWF0b3JfbmFtZTYaAWeACXBsYW5fbmFtZTYaAmeACXBsYW5fZGVzYzYaA2coNhoEF2eACmNyZWF0ZWRfb26ACVN1YnNjcnlwdGcoIxalRCJDNQAyCmAjE0EACbEishA0ALIJs4k=",clear:"BYEBQw=="}},24:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return O})),n.d(t,"j",(function(){return x})),n.d(t,"d",(function(){return v})),n.d(t,"i",(function(){return C})),n.d(t,"c",(function(){return k})),n.d(t,"h",(function(){return D})),n.d(t,"e",(function(){return B})),n.d(t,"g",(function(){return F}));var a,r,c=n(4),o=n.n(c),s=n(23),i=n(7),l=n(65),u=n(17),d=n.n(u),p=n(95),b=n(264),j=n(157);function f(t){var n={};for(var a in t){var r=e.from(t[a].key,"base64").toString(),c=t[a].value;switch(c.action?c.action:c.type){case 1:n[r]={b:e.from(c.bytes,"base64"),i:0};break;case 2:n[r]={i:c.uint,b:new Uint8Array}}}return n}function h(){if(void 0!==r)return r;var e=l.a.algod.token,t=l.a.algod.host,n=l.a.algod.port;return r=new d.a.Algodv2(e,t,n)}function O(e){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h(),e.next=3,n.getApplicationByID(t).do().then((function(e){return console.log("get sub plan app ",e),b.a.fromState(t,e.params["global-state"])})).catch((function(e){return console.log("error ",e),null}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t,n,a,r){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(o.a.mark((function t(n,a,r,c,s){var i,l,u,b,j,f,m,x,g,w,v,A;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=h(),t.next=3,O(n);case 3:return l=t.sent,u=r,b=l.addr,j=[new Uint8Array(e.from("subscribe"))],t.next=9,i.getTransactionParams().do();case 9:return f=t.sent,m=d.a.makePaymentTxnWithSuggestedParams(u,b,d.a.algosToMicroalgos(a),void 0,void 0,f),x=d.a.makeApplicationOptInTxn(u,f,n),g=d.a.makeApplicationNoOpTxn(u,f,n,j),w=[],t.next=16,y(u,n);case 16:return t.sent||w.push(x),w.push(m,g),d.a.assignGroupID(w),t.next=22,Object(p.a)(w,c,s);case 22:return v=t.sent,t.next=25,N(v);case 25:if(!(A=t.sent)["pool-error"]){t.next=28;break}throw new Error("Subscription Failed: "+A["pool-error"]);case 28:return t.abrupt("return",A);case 29:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(e,t){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h(),e.next=3,a.accountInformation(t).do();case 3:return r=e.sent,e.abrupt("return",r["apps-local-state"].some((function(e){return e.id===n})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t,n,a,r,c,o){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(o.a.mark((function t(n,a,r,c,s,i,l){var b,f,O,m,x,g,y,w,v;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b=h(),f=new Uint8Array(e.from(j.a.approval,"base64")),O=new Uint8Array(e.from(j.a.clear,"base64")),m=s,x=[Object(u.decodeAddress)(m).publicKey,new Uint8Array(e.from(n)),new Uint8Array(e.from(a)),new Uint8Array(e.from(r)),Object(u.encodeUint64)(d.a.algosToMicroalgos(c))],t.next=7,b.getTransactionParams().do();case 7:return g=t.sent,y=new u.Transaction({from:m,appIndex:0,type:u.TransactionType.appl,appOnComplete:u.OnApplicationComplete.NoOpOC,appApprovalProgram:f,appClearProgram:O,appGlobalInts:2,appGlobalByteSlices:5,appLocalInts:3,appLocalByteSlices:0,appArgs:x,suggestedParams:g}),t.next=11,Object(p.a)([y],i,l);case 11:return w=t.sent,t.next=14,N(w);case 14:if(!(v=t.sent)["pool-error"]){t.next=17;break}throw new Error("Create Application failed: "+v["pool-error"]);case 17:return t.abrupt("return",v["application-index"]);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(e,t,n,a){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(o.a.mark((function e(t,n,a,r){var c,s,i,l,u,b,j,f,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=h(),s=n,i=d.a.getApplicationAddress(t),l=101e3,e.next=6,c.getTransactionParams().do();case 6:return u=e.sent,b=d.a.makePaymentTxnWithSuggestedParams(s,i,l,void 0,void 0,u),j=[b],d.a.assignGroupID(j),e.next=12,Object(p.a)(j,a,r);case 12:return f=e.sent,e.next=15,N(f);case 15:if(!(O=e.sent)["pool-error"]){e.next=18;break}throw new Error("Failed to setup subscription: "+O["pool-error"]);case 18:return e.abrupt("return",O);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n,a){return S.apply(this,arguments)}function S(){return(S=Object(i.a)(o.a.mark((function e(t,n,a,r){var c,i,l,u,b,j,f,O,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=h(),l=[i=n],e.next=5,c.getTransactionParams().do();case 5:return u=e.sent,b=d.a.makeApplicationDeleteTxn(i,u,t,void 0,l),e.next=9,Object(p.a)([b],a,r);case 9:return j=e.sent,f=Object(s.a)(j,1),O=f[0],e.next=14,N([O]);case 14:if(!(m=e.sent)["pool-error"]){e.next=17;break}throw new Error("Failed to close subscription: "+m["pool-error"]);case 17:return e.abrupt("return",m);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(o.a.mark((function e(t){var n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h(),e.next=3,n.sendRawTransaction(t.map((function(e){return e.blob}))).do();case 3:return a=e.sent,r=a.txId,e.next=7,_(r,3);case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(o.a.mark((function e(t,n){var a,r,c,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null==(a=h())||null==t||n<0)){e.next=3;break}throw new Error("Bad arguments.");case 3:return e.next=5,a.status().do();case 5:if("undefined"!==typeof(r=e.sent)){e.next=8;break}throw new Error("Unable to get node status");case 8:c=r["last-round"]+1,s=c;case 10:if(!(s<c+n)){e.next=24;break}return e.next=13,a.pendingTransactionInformation(t).do();case 13:if(void 0===(i=e.sent)){e.next=19;break}if(!(null!==i["confirmed-round"]&&i["confirmed-round"]>0)){e.next=17;break}return e.abrupt("return",i);case 17:if(!(null!=i["pool-error"]&&i["pool-error"].length>0)){e.next=19;break}throw new Error("Transaction Rejected pool error".concat(i["pool-error"]));case 19:return e.next=21,a.statusAfterBlock(s).do();case 21:s+=1,e.next=10;break;case 24:throw new Error("Transaction not confirmed after ".concat(n," rounds!"));case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(o.a.mark((function e(t){var n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h(),e.next=3,n.accountInformation(t).do();case 3:return a=e.sent,r=a["apps-local-state"],c=[],r.forEach((function(e){var t=z(f(e["key-value"]));c.push({id:e.id,"local-state":t})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h(),e.next=3,n.getApplicationByID(t).do();case 3:return a=e.sent,console.log("appInfoResponse: ",a),e.abrupt("return",a.params["global-state"]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(o.a.mark((function e(t){var n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h(),e.next=3,n.accountInformation(t).do();case 3:return a=e.sent,r=a["created-apps"],c=[],r.forEach((function(e){var t=z(f(e.params["global-state"]));"Subscrypt"===t.created_on&&c.push({appId:e.id,globalState:t})})),console.log("userCreatedSubscriptionPlans: ",c),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){for(var t={},n=0,a=Object.entries(e);n<a.length;n++){var r=Object(s.a)(a[n],2),c=r[0],o=r[1];"creator"!==c&&0===o.i?t[c]=(new TextDecoder).decode(o.b):t[c]=o}return t}!function(e){e.creator_key="creator",e.creator_name_key="creator_name",e.plan_name_key="plan_name",e.plan_desc_key="plan_desc",e.plan_monthly_price_key="plan_monthly_price",e.created_on_key="created_on"}(a||(a={}))}).call(this,n(22).Buffer)},264:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(27),r=n(43),c=n(17),o=n.n(c),s=n(24),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,e),this.id=0,this.addr="",this.creator="",this.creator_name="",this.plan_name="",this.plan_desc="",this.plan_monthly_price=0,this.created_on="",Object.assign(this,t)}return Object(r.a)(e,null,[{key:"fromState",value:function(t,n){var a=Object(s.b)(n);return new e({id:t,addr:o.a.getApplicationAddress(t),creator:o.a.encodeAddress(a[s.a.creator_key].b),creator_name:(new TextDecoder).decode(a[s.a.creator_name_key].b),plan_name:(new TextDecoder).decode(a[s.a.plan_name_key].b),plan_desc:(new TextDecoder).decode(a[s.a.plan_desc_key].b),plan_monthly_price:a[s.a.plan_monthly_price_key].i,created_on:(new TextDecoder).decode(a[s.a.created_on_key].b)})}}]),e}()},280:function(e,t,n){},281:function(e,t,n){},283:function(e,t){},340:function(e,t){},342:function(e,t){},352:function(e,t){},354:function(e,t){},381:function(e,t){},382:function(e,t){},387:function(e,t){},389:function(e,t){},396:function(e,t){},415:function(e,t){},504:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(36),o=n(42),s=n.n(o),i=n(13),l=(n(280),n(15)),u=n(538),d=n(96),p=n(540),b=(n(281),n(533)),j=n(44),f=n(534),h=n(527),O=n(528);function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function x(e,t){var n=BigInt("1"+"0".repeat(t)),a=e%n;return(e/n).toString()+"."+a.toString().padStart(t,"0").substring(0,2)}var g,y=n(4),w=n.n(y),v=n(7),A=n(64),C=n(268),T=n(256),k=n.n(T),S=n(257),N=n.n(S),I=n(17),_=n.n(I);!function(e){e.MainNet="MainNet",e.TestNet="TestNet"}(g||(g={}));var E=new _.a.Algodv2("","https://algoexplorerapi.io",""),D=new _.a.Algodv2("","https://testnet.algoexplorerapi.io","");function P(e){switch(e){case g.MainNet:return E;case g.TestNet:return D;default:throw new Error("Unknown chain type: ".concat(e))}}function B(e,t){return M.apply(this,arguments)}function M(){return(M=Object(v.a)(w.a.mark((function e(t,n){var a,r,c,o,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=P(t),e.next=3,a.accountInformation(n).setIntDecoding(_.a.IntDecoding.BIGINT).do();case 3:return r=e.sent,c=r.amount,o=r.assets,(s=o.map((function(e){var t=e["asset-id"],n=e.amount,a=e.creator,r=e.frozen;return{id:Number(t),amount:n,creator:a,frozen:r,decimals:0}}))).sort((function(e,t){return e.id-t.id})),e.next=10,Promise.all(s.map(function(){var e=Object(v.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getAssetByID(t.id).do();case 2:n=e.sent,r=n.params,t.name=r.name,t.unitName=r["unit-name"],t.url=r.url,t.decimals=r.decimals;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:return s.unshift({id:0,amount:c,creator:"",frozen:!1,decimals:6,name:"Algo",unitName:"Algo"}),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F={chain:g.TestNet,walletType:"",accounts:[],address:"",assets:[],connected:!1,connector:null,fetching:!1},R=Object(A.b)("walletConnect/getAccountAssets",function(){var e=Object(v.a)(w.a.mark((function e(t){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.chain,a=t.address,r=B(n,a),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(A.c)({name:"wallet",initialState:F,reducers:{setFetching:function(e,t){console.log("setFetching: ",t.payload),e.fetching=t.payload},setWalletType:function(e,t){e.walletType=t.payload},switchChain:function(e,t){console.log("switchChain chain: ",t.payload),e.chain=t.payload},reset:function(e){e.accounts=[],e.address="",e.assets=[],e.connected=!1,e.connector=null,e.walletType="",console.log("reset state",e)},walletInit:function(e){"walletConnect"===e.walletType?e.connector=new C.a({bridge:"https://bridge.walletconnect.org",qrcodeModal:k.a}):"myAlgo"===e.walletType?e.connector=new N.a:"algoSigner"===e.walletType&&(e.connector=window.AlgoSigner)},setConnected:function(e,t){e.connected=t.payload},setAccounts:function(e,t){e.accounts=t.payload,"walletConnect"===e.walletType?e.address=t.payload[0]:"myAlgo"!==e.walletType&&"algoSigner"!==e.walletType||(e.address=t.payload[0].address)},setAccountAssets:function(e,t){e.assets=t.payload},killSession:function(e){e.connected&&("walletConnect"===e.walletType?e.connector.killSession():"myAlgo"!==e.walletType&&"algoSigner"!==e.walletType||z.caseReducers.reset(e))}},extraReducers:function(e){e.addCase(R.fulfilled,(function(e,t){e.assets=t.payload}))}}),W=function(e){return e.wallet&&e.wallet.walletType},Y=function(e){return e.wallet&&e.wallet.fetching},G=function(e){return e.wallet&&e.wallet.chain},J=function(e){return e.wallet&&e.wallet.connected},H=function(e){return e.wallet&&e.wallet.connector},U=function(e){return e.wallet&&e.wallet.assets},Q=function(e){return e.wallet&&e.wallet.address},Z=z.actions,L=Z.setFetching,V=(Z.switchChain,Z.reset),X=Z.setWalletType,K=Z.walletInit,q=Z.setConnected,$=Z.setAccounts,ee=Z.killSession,te=z.reducer,ne=Object(A.c)({name:"application",initialState:{isModalOpen:!1,isNotificationOpen:!1,notificationTitle:"",notificationContent:""},reducers:{setIsModalOpen:function(e,t){e.isModalOpen=t.payload},setIsNotificationOpen:function(e,t){e.isNotificationOpen=t.payload},setNotificationTitle:function(e,t){e.notificationTitle=t.payload},setNotificationContent:function(e,t){e.notificationContent=t.payload}}}),ae=function(e){return e.application&&e.application.isModalOpen},re=function(e){return e.application&&e.application.isNotificationOpen},ce=function(e){return e.application&&e.application.notificationTitle},oe=function(e){return e.application&&e.application.notificationContent},se=ne.actions,ie=se.setIsModalOpen,le=se.setIsNotificationOpen,ue=se.setNotificationTitle,de=se.setNotificationContent,pe=ne.reducer,be=function(e){return function(t){e($(t)),e(q(!0))}},je=n.p+"static/media/logo.4c0b7fbc.svg",fe=n(2),he=function(){var e=Object(i.c)(Y),t=Object(i.c)(H),n=Object(i.c)(U),r=Object(i.c)(Q),o=Object(i.c)(G),s=Object(i.c)(W),l=function(e){var t=e&&e.find((function(e){return e&&0===e.id}));return void 0!==t&&null!=t||(t={id:0,amount:BigInt(0),creator:"",frozen:!1,decimals:6,name:"Algo",unitName:"Algo"}),t}(n),u=Object(i.b)();return Object(a.useEffect)((function(){if(t){if("walletConnect"===s){!function(e){return function(t){t&&(t.on("connect",(function(t,n){if(console.log("%cOn connect","background: yellow"),t)throw t;var a=n.params[0].accounts;e($(a))})),t.on("session_update",(function(t,n){if(console.log("%cOn session_update","background: yellow"),t)throw t;var a=n.params[0].accounts;e($(a))})),t.on("disconnect",(function(t,n){if(console.log("%cOn disconnect","background: yellow"),t)throw t;e(V())})))}}(u)(t),t.connected||t.createSession();var e=t.accounts;be(u)(e)}"myAlgo"===s&&t.connect().then((function(e){be(u)(e)})),"algoSigner"===s&&t.accounts({ledger:o}).then((function(e){be(u)(e)}))}}),[t]),Object(a.useEffect)((function(){t&&r&&r.length>0&&(u(R({chain:o,address:r})),u(L(!0)))}),[r]),Object(a.useEffect)((function(){u(L(!1))}),[n]),Object(fe.jsx)("div",{className:"site-layout-background site-header",children:Object(fe.jsxs)("div",{className:"site-header-inner",children:[Object(fe.jsx)("div",{className:"site-header-left",children:Object(fe.jsxs)(c.b,{className:"site-logo",to:"/",children:[Object(fe.jsx)("img",{src:je,alt:"Subscrypt"}),Object(fe.jsx)("span",{className:"site-name",children:"Subscrypt"})]})}),Object(fe.jsxs)("div",{className:"site-header-right",children:[Object(fe.jsx)(b.a,{position:j.a.BOTTOM_LEFT,content:Object(fe.jsx)(f.a,{children:Object(fe.jsxs)(f.a.Group,{children:[Object(fe.jsx)(f.a.Item,{children:Object(fe.jsx)(c.b,{to:"/supporter/dashboard",children:"Dashboard"})}),Object(fe.jsx)(f.a.Item,{children:Object(fe.jsx)(c.b,{to:"/supporter",children:"Subscribe to Plan"})})]})}),children:Object(fe.jsx)("span",{className:"menu-trigger",children:"Supporter"})}),Object(fe.jsx)(b.a,{position:j.a.BOTTOM_LEFT,content:Object(fe.jsx)(f.a,{children:Object(fe.jsxs)(f.a.Group,{children:[Object(fe.jsx)(f.a.Item,{children:Object(fe.jsx)(c.b,{to:"/creator/dashboard",children:"Dashboard"})}),Object(fe.jsx)(f.a.Item,{children:Object(fe.jsx)(c.b,{to:"/creator",children:"Create Plan"})})]})}),children:Object(fe.jsx)("span",{className:"menu-trigger",children:"Creator"})}),r?Object(fe.jsxs)("div",{className:"header-address-info",children:[e?null:Object(fe.jsxs)("span",{className:"wallet-amount",children:[x(l.amount,l.decimals)," ",l.unitName||"units"]}),Object(fe.jsx)("span",{className:"header-account",children:m(r)}),Object(fe.jsx)(b.a,{position:j.a.BOTTOM_RIGHT,content:Object(fe.jsx)(f.a,{children:Object(fe.jsx)(f.a.Group,{children:Object(fe.jsx)(f.a.Item,{onSelect:function(){return u(ee())},children:"Disconnect"})})}),children:Object(fe.jsx)(h.a,{icon:O.a,marginRight:16,appearance:"minimal",className:"disconnect-button"})})]}):Object(fe.jsx)(d.a,{appearance:"primary",onClick:function(){return u(ie(!0))},size:"medium",children:"Connect Wallet"})]})]})})},Oe=function(){return Object(fe.jsx)("div",{className:"loading-icon",children:Object(fe.jsx)("span",{})})},me=function(){var e=Object(i.c)(J),t=Object(i.c)(Y);return Object(fe.jsxs)("div",{className:"site-body",children:[Object(fe.jsx)("h1",{children:"Welcome to Subscrypt"}),Object(fe.jsx)("p",{className:"desc",children:"We are a decentralised subscription service for creators and their supporters."}),t?Object(fe.jsx)(Oe,{}):e?Object(fe.jsxs)("div",{className:"site-body-inner",children:[Object(fe.jsx)("h2",{children:"Choose Your Role"}),Object(fe.jsx)(c.b,{className:"role-button",to:"/creator",children:"I am a Creator"}),Object(fe.jsx)(c.b,{className:"role-button",to:"/supporter",children:"I am a Supporter"})]}):Object(fe.jsxs)("div",{children:[Object(fe.jsx)("p",{className:"desc",children:"Creators can customise their plans on Subscrypt. Supporters can use their Algorand wallet to pay for the subscription and our smart contracts will handle the rest."}),Object(fe.jsx)("p",{className:"desc",children:"A decentralised subscription service offers creators freedom on how and where their paywalled content will be hosted. Creators can integrate their supporters' Subscrypt status to their own platform for providing perks."}),Object(fe.jsx)("p",{className:"desc",children:"Connect your wallet to try now!"})]})]})},xe=n.p+"static/media/algorandwallet.37675b59.svg",ge=n.p+"static/media/myalgo.7390ec09.svg",ye=n.p+"static/media/algosigner.2ec35000.svg",we=n(23),ve=n(537),Ae=n(530),Ce=n(24),Te=function(){var e=Object(i.c)(J),t=Object(i.c)(Y),n=Object(i.c)(Q),r=Object(i.c)(W),c=Object(i.c)(H),o=Object(a.useState)(""),s=Object(we.a)(o,2),u=s[0],p=s[1],b=Object(a.useState)(""),j=Object(we.a)(b,2),f=j[0],h=j[1],O=Object(a.useState)(""),m=Object(we.a)(O,2),x=m[0],g=m[1],y=Object(a.useState)(""),A=Object(we.a)(y,2),C=A[0],T=A[1],k=Object(a.useState)(0),S=Object(we.a)(k,2),N=S[0],I=S[1],_=Object(i.b)(),E=Object(l.f)(),D=function(){var e=Object(v.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&f&&x&&C&&n&&r&&c){e.next=2;break}return e.abrupt("return");case 2:return _(L(!0)),e.next=5,Object(Ce.d)(u,f,x,Number(C),n,r,c);case 5:return t=e.sent,e.next=8,Object(Ce.i)(t,n,r,c).then((function(e){I(t),_(le(!0)),_(ue("Subscription Setup Success")),_(de("Confirmed at round "+e["confirmed-round"]+". Your subscription plan's app ID is "+t+".")),_(L(!1)),E("/creator/dashboard")})).catch((function(e){_(le(!0)),_(ue("Subscription Setup Error")),_(de(e)),_(L(!1))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(fe.jsx)("div",{className:"site-body",children:Object(fe.jsxs)("div",{className:"site-body-inner form-wrapper",children:[Object(fe.jsx)("h2",{children:"Create Subscription Plan"}),t?Object(fe.jsx)(Oe,{}):e?0===N?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ve.a,{label:"Creator",description:"Enter a name for your supporters to identify you.",onChange:function(e){return p(e.target.value)},value:u}),Object(fe.jsx)(ve.a,{label:"Plan",description:"Enter your subscription plan name.",onChange:function(e){return h(e.target.value)},value:f}),Object(fe.jsx)(Ae.a,{label:"Description",description:"Let your supporters know what you are offering them.",onChange:function(e){return g(e.target.value)},value:x}),Object(fe.jsxs)("div",{className:"form-row",children:[Object(fe.jsx)(ve.a,{label:"Monthly Price",description:"This is how much subscribers will pay every month.",onChange:function(e){return T(e.target.value)},value:C}),Object(fe.jsx)("span",{children:"Algo"})]}),Object(fe.jsx)(d.a,{appearance:"primary",onClick:D,children:"Create Plan"})]}):Object(fe.jsxs)("p",{className:"reminder-text",children:["Your subscription plan's app ID is ",N]}):Object(fe.jsx)("p",{className:"reminder-text",children:"Please connect to your wallet first."})]})})},ke=n(532),Se=function(){var e=Object(i.c)(J),t=Object(i.c)(Y),n=Object(i.c)(Q),r=Object(i.c)(W),c=Object(i.c)(H),o=Object(a.useState)([]),s=Object(we.a)(o,2),l=s[0],u=s[1],p=Object(i.b)(),b=function(e){p(le(!0)),p(ue("Delete Plan Error")),p(de("Please try again."))},j=function(){var e=Object(v.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r&&c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(Ce.c)(parseInt(t),n,r,c).then((function(e){try{console.log("result: ",e),p(le(!0)),p(ue("Deleted Plan Successfully")),p(de("Confirmed at round "+e["confirmed-round"]))}catch(t){b()}})).catch((function(e){b()}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n.length>0&&r&&c&&(console.log("address: ",n),Object(Ce.g)(n).then((function(e){u(e)})))}),[n,r,c]),Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)("div",{className:"site-body dashboard-view",children:[Object(fe.jsx)("h2",{children:"Creator Dashboard"}),t?Object(fe.jsx)(Oe,{}):e?Object(fe.jsxs)(ke.a,{children:[Object(fe.jsxs)(ke.a.Head,{children:[Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Plan ID"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Plan"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Details"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Monthly Price"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Actions"})]}),Object(fe.jsx)(ke.a.VirtualBody,{height:240,children:l.map((function(e){return Object(fe.jsxs)(ke.a.Row,{children:[Object(fe.jsx)(ke.a.TextCell,{children:e.appId}),Object(fe.jsx)(ke.a.TextCell,{children:e.globalState.plan_name}),Object(fe.jsx)(ke.a.TextCell,{children:e.globalState.plan_desc}),Object(fe.jsxs)(ke.a.TextCell,{isNumber:!0,children:[_.a.microalgosToAlgos(e.globalState.plan_monthly_price.i)," Algo"]}),Object(fe.jsx)(ke.a.TextCell,{children:Object(fe.jsx)(d.a,{size:"small",onClick:function(){return j(e.appId)},children:"Delete"})})]},e.appId)}))})]}):Object(fe.jsx)("p",{className:"reminder-text",children:"Please connect to your wallet first."})]})})},Ne=function(){var e=Object(i.c)(J),t=Object(i.c)(Y),n=Object(i.c)(Q),r=Object(i.c)(W),c=Object(i.c)(H),o=Object(a.useState)(""),s=Object(we.a)(o,2),u=s[0],p=s[1],b=Object(a.useState)(""),j=Object(we.a)(b,2),f=j[0],h=j[1],O=Object(a.useState)(0),m=Object(we.a)(O,2),x=m[0],g=m[1],y=Object(a.useState)(0),A=Object(we.a)(y,2),C=A[0],T=A[1],k=Object(i.b)(),S=Object(l.f)(),N=function(){var e=Object(v.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&f){e.next=2;break}return e.abrupt("return");case 2:return t=parseInt(u),k(L(!0)),e.next=6,Object(Ce.j)(t,C,n,r,c).then((function(e){k(le(!0)),k(ue("Subscription Success")),k(de("Confirmed at round "+e["confirmed-round"])),k(L(!1)),S("/supporter/dashboard")})).catch((function(e){k(le(!0)),k(ue("Subscription Error")),k(de("Please try again.")),k(L(!1))}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){u.length>0?Object(Ce.e)(parseInt(u)).then((function(e){var t=_.a.microalgosToAlgos(Object(Ce.b)(e).plan_monthly_price.i);g(t)})):g(0)}),[u]),Object(a.useEffect)((function(){if(parseInt(f)>0&&x>0){var e=parseInt(f)*x;T(e)}}),[f,x]),Object(fe.jsx)("div",{className:"site-body",children:Object(fe.jsxs)("div",{className:"site-body-inner form-wrapper",children:[Object(fe.jsx)("h2",{children:"Subscribe to Plan"}),t?Object(fe.jsx)(Oe,{}):e?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ve.a,{label:"App ID",description:"Enter the app ID for the plan.",onChange:function(e){return p(e.target.value)},value:u}),Object(fe.jsx)(ve.a,{label:"Number of Months",description:"Enter the number of months you'd like to be subscribed for.",onChange:function(e){return h(e.target.value)},value:f}),x?Object(fe.jsx)("div",{className:"form-row",children:Object(fe.jsxs)("span",{className:"price",children:["Monthly Price: ",x||""," Algo"]})}):null,f&&x?Object(fe.jsx)("div",{className:"form-row",children:Object(fe.jsxs)("span",{className:"price",children:["Total: ",C," Algo"]})}):null,Object(fe.jsx)(d.a,{appearance:"primary",onClick:N,children:"Subscribe"})]}):Object(fe.jsx)("p",{className:"reminder-text",children:"Please connect to your wallet first."})]})})},Ie=function(){var e=Object(i.c)(J),t=Object(i.c)(Y),n=Object(i.c)(Q),r=Object(i.c)(W),c=Object(i.c)(H),o=Object(a.useState)([]),s=Object(we.a)(o,2),l=s[0],u=s[1];return Object(a.useEffect)((function(){}),[n,r,c]),Object(a.useEffect)((function(){n.length>0&&Object(Ce.h)(n).then((function(e){var t=e.map((function(e,t){return Object(Ce.f)(e.id)}));Promise.all(t).then((function(t){var n=t.filter((function(e){return null!=e}));e.forEach((function(t,a){n.find((function(e){return t.id===e.id}))&&(e[a]["global-state"]=n.find((function(e){return t.id===e.id})))}));var a=e.filter((function(e){return e.hasOwnProperty("global-state")}));u(a)}))}))}),[n]),Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)("div",{className:"site-body dashboard-view",children:[Object(fe.jsx)("h2",{children:"Supporter Dashboard"}),t?Object(fe.jsx)(Oe,{}):e?Object(fe.jsxs)(ke.a,{children:[Object(fe.jsxs)(ke.a.Head,{children:[Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Plan ID"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Creator"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Plan"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Details"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Subscription Length"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Total Paid"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Monthly Price"}),Object(fe.jsx)(ke.a.TextHeaderCell,{children:"Actions"})]}),Object(fe.jsx)(ke.a.VirtualBody,{height:240,children:l.map((function(e){return Object(fe.jsxs)(ke.a.Row,{children:[Object(fe.jsx)(ke.a.TextCell,{children:e.id}),Object(fe.jsx)(ke.a.TextCell,{children:e["global-state"].creator_name}),Object(fe.jsx)(ke.a.TextCell,{children:e["global-state"].plan_name}),Object(fe.jsx)(ke.a.TextCell,{children:e["global-state"].plan_desc}),Object(fe.jsxs)(ke.a.TextCell,{children:[e["local-state"].months_subscribed.i," months"]}),Object(fe.jsxs)(ke.a.TextCell,{isNumber:!0,children:[_.a.microalgosToAlgos(e["local-state"].paid.i)," Algo"]}),Object(fe.jsxs)(ke.a.TextCell,{isNumber:!0,children:[_.a.microalgosToAlgos(e["global-state"].plan_monthly_price)," Algo"]}),Object(fe.jsx)(ke.a.TextCell,{children:Object(fe.jsx)(d.a,{size:"small",children:"Unsubscribe"})})]},e.id)}))})]}):Object(fe.jsx)("p",{className:"reminder-text",children:"Please connect to your wallet first."})]})})},_e=function(){var e=Object(i.c)(ae),t=Object(i.c)(ce),n=Object(i.c)(oe),r=Object(i.c)(re),c=Object(i.c)(W),o=Object(i.c)(J),s=Object(i.b)(),b=function(e){return s(X(e))};return Object(a.useEffect)((function(){null!=window.localStorage.getItem("walletconnect")?s(X("walletConnect")):"undefined"!==typeof window.AlgoSigner&&s(X("algoSigner"))}),[]),Object(a.useEffect)((function(){c.length>0&&s(K())}),[c]),Object(a.useEffect)((function(){o&&s(ie(!1))}),[o]),Object(fe.jsxs)("div",{className:"site-layout",children:[Object(fe.jsx)(he,{}),Object(fe.jsxs)(l.c,{children:[Object(fe.jsx)(l.a,{index:!0,element:Object(fe.jsx)(me,{})}),Object(fe.jsx)(l.a,{path:"creator",element:Object(fe.jsx)(Te,{})}),Object(fe.jsx)(l.a,{path:"creator/dashboard",element:Object(fe.jsx)(Se,{})}),Object(fe.jsx)(l.a,{path:"supporter",element:Object(fe.jsx)(Ne,{})}),Object(fe.jsx)(l.a,{path:"supporter/dashboard",element:Object(fe.jsx)(Ie,{})})]}),Object(fe.jsx)("div",{className:"footer",children:"Subscrypt \xa92021 Created with \ud83d\udc96"}),Object(fe.jsxs)(u.a,{isShown:e,title:"Connect to a wallet",hasFooter:!1,onCloseComplete:function(){return s(ie(!1))},children:[Object(fe.jsxs)(d.a,{className:"wallet-button",appearance:"minimal",onClick:function(){return s(b("walletConnect"))},children:[Object(fe.jsx)("img",{className:"wallet-icon",src:xe,alt:"Algorand wallet"}),Object(fe.jsx)("span",{children:"Algorand Wallet"})]}),Object(fe.jsxs)(d.a,{className:"wallet-button",appearance:"minimal",onClick:function(){return s(b("myAlgo"))},children:[Object(fe.jsx)("img",{className:"wallet-icon",src:ge,alt:"MyAlgo Wallet"}),Object(fe.jsx)("span",{children:"My Algo Wallet"})]}),Object(fe.jsxs)(d.a,{className:"wallet-button",appearance:"minimal",onClick:function(){return s(b("algoSigner"))},children:[Object(fe.jsx)("img",{className:"wallet-icon",src:ye,alt:"AlgoSigner"}),Object(fe.jsx)("span",{children:"AlgoSigner"})]})]}),Object(fe.jsx)(p.a,{title:t,isShown:r,onCloseComplete:function(){return s(le(!1))},hasFooter:!1,children:n})]})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,541)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},De=Object(A.a)({reducer:{wallet:te,application:pe},preloadedState:{},middleware:function(e){return e({serializableCheck:!1})}}),Pe=n(260),Be=n(37),Me=n(267),Fe={baseStyle:Object(Be.a)(Object(Be.a)({},Me.a.components.Button),{},{fontFamily:"var(--font-family)",fontSize:"var(--font-size-s)",padding:"var(--space-s)",borderRadius:4}),appearances:{primary:{color:"white",backgroundColor:"var(--blue)",_hover:{backgroundColor:"var(--blue-light)"}},minimal:{color:"black",backgroundColor:"transparent",border:"2px solid #dcdcdc",_hover:{border:"2px solid #999"}}},sizes:{small:{height:"1.5rem",lineHeight:"1",fontSize:"var(--font-size-xs)"},large:{height:"3rem",fontSize:"var(--font-size-l)"}}},Re={baseStyle:Object(Be.a)(Object(Be.a)({},Me.a.components.Input),{},{fontSize:"var(--font-size-m)",padding:"var(--space-s)",border:"1px solid var(--grey-lighter)",borderRadius:"var(--border-radius)"})},ze={baseStyle:Object(Be.a)(Object(Be.a)({},Me.a.components.Table),{},{fontSize:"var(--font-size-m)",padding:"var(--space-s)",border:"none",borderRadius:"var(--border-radius)"})},We=Object(Be.a)(Object(Be.a)({},Me.a),{},{fontFamilies:{display:"var(--font-family-display)",ui:"var(--font-family)",mono:"var(--font-family-mono)"},components:Object(Be.a)(Object(Be.a)({},Me.a.components),{},{Button:Fe,Input:Re,Table:ze})});s.a.render(Object(fe.jsx)(r.a.StrictMode,{children:Object(fe.jsx)(i.a,{store:De,children:Object(fe.jsx)(Pe.a,{value:We,children:Object(fe.jsx)(c.a,{children:Object(fe.jsx)(_e,{})})})})}),document.getElementById("root")),Ee()},65:function(e,t,n){"use strict";var a={explorer:"algoexplorer.io",algod:{host:"https://testnet.algoexplorerapi.io",port:0,token:"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"},indexer:{host:"https://testnet.algoexplorerapi.io/idx2",port:0,token:""},network:"TestNet"};t.a=a},95:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var a=n(4),r=n.n(a),c=n(7),o=n(17),s=n.n(o),i=n(263);function l(e,t,n){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(r.a.mark((function t(n,a,c){var o,l,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.map((function(t){return{txn:e.from(s.a.encodeUnsignedTransaction(t)).toString("base64")}})),l=Object(i.formatJsonRpcRequest)("algo_signTxn",[o]),u=[],"walletConnect"!==a){t.next=10;break}return t.next=6,c.sendCustomRequest(l);case 6:return u=t.sent,t.abrupt("return",u.map((function(t,a){return console.log("Element: ",t),t?{txID:n[a].txID(),blob:new Uint8Array(e.from(t,"base64"))}:{txID:n[a].txID(),blob:new Uint8Array}})));case 10:if("myAlgo"!==a){t.next=16;break}return t.next=13,c.signTransaction(o.map((function(e){return e.txn})));case 13:u=t.sent,t.next=20;break;case 16:if("algoSigner"!==a){t.next=20;break}return t.next=19,c.signTxn([o]);case 19:u=t.sent;case 20:return console.log("RESULT: ",u),t.abrupt("return",u.map((function(t,a){return console.log("Element: ",t),t?{txID:n[a].txID(),blob:new Uint8Array(e.from(t.blob,"base64"))}:{txID:n[a].txID(),blob:new Uint8Array}})));case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}).call(this,n(22).Buffer)}},[[504,1,2]]]);
//# sourceMappingURL=main.76ca7073.chunk.js.map